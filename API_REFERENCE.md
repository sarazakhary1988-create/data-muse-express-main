# MANUS 1.6 MAX - API Reference\n\n## Base URLs\n\n**REST API** (PostgREST):\n```\nhttps://[PROJECT_ID].supabase.co/rest/v1\n```\n\n**Functions API** (Edge Functions):\n```\nhttps://[PROJECT_ID].supabase.co/functions/v1\n```\n\n## Authentication\n\nAll requests require authorization header:\n\n```bash\n-H \"Authorization: Bearer [ANON_KEY]\"\n```\n\nFor admin operations:\n```bash\n-H \"Authorization: Bearer [SERVICE_ROLE_KEY]\"\n```\n\n## Tables API (PostgREST)\n\n### agent_tasks\n\n**Create Task**:\n```bash\ncurl -X POST https://[PROJECT_ID].supabase.co/rest/v1/agent_tasks \\\n  -H \"Authorization: Bearer [KEY]\" \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\n    \"user_id\": \"550e8400-e29b-41d4-a716-446655440000\",\n    \"title\": \"Analyze market trends\",\n    \"goal\": \"Research AI market growth\",\n    \"status\": \"pending\",\n    \"context\": {\"industry\": \"AI\", \"region\": \"Global\"}\n  }'\n```\n\n**Get Tasks**:\n```bash\ncurl https://[PROJECT_ID].supabase.co/rest/v1/agent_tasks \\\n  -H \"Authorization: Bearer [KEY]\"\n```\n\n**Get Single Task**:\n```bash\ncurl https://[PROJECT_ID].supabase.co/rest/v1/agent_tasks/[ID] \\\n  -H \"Authorization: Bearer [KEY]\"\n```\n\n**Update Task**:\n```bash\ncurl -X PATCH https://[PROJECT_ID].supabase.co/rest/v1/agent_tasks/[ID] \\\n  -H \"Authorization: Bearer [KEY]\" \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\"status\": \"completed\", \"result\": {\"findings\": \"...\"}}'\n```\n\n### agent_steps\n\n**Create Step**:\n```bash\ncurl -X POST https://[PROJECT_ID].supabase.co/rest/v1/agent_steps \\\n  -H \"Authorization: Bearer [KEY]\" \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\n    \"task_id\": \"550e8400-e29b-41d4-a716-446655440000\",\n    \"step_number\": 1,\n    \"phase\": \"analyze\",\n    \"action\": \"Assess current situation\",\n    \"status\": \"running\"\n  }'\n```\n\n**List Steps for Task**:\n```bash\ncurl 'https://[PROJECT_ID].supabase.co/rest/v1/agent_steps?task_id=eq.[TASK_ID]' \\\n  -H \"Authorization: Bearer [KEY]\"\n```\n\n### memory_items\n\n**Add Memory**:\n```bash\ncurl -X POST https://[PROJECT_ID].supabase.co/rest/v1/memory_items \\\n  -H \"Authorization: Bearer [KEY]\" \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\n    \"user_id\": \"550e8400-e29b-41d4-a716-446655440000\",\n    \"memory_type\": \"insight\",\n    \"content\": \"AI adoption is accelerating in enterprise\",\n    \"metadata\": {\"source\": \"research\", \"confidence\": 0.95}\n  }'\n```\n\n**Search Memories** (Semantic search):\n```bash\ncurl -X POST https://[PROJECT_ID].supabase.co/rest/v1/rpc/search_memories \\\n  -H \"Authorization: Bearer [KEY]\" \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\n    \"user_id_param\": \"550e8400-e29b-41d4-a716-446655440000\",\n    \"search_embedding\": [0.1, 0.2, ...], \n    \"limit_count\": 10\n  }'\n```\n\n### news_cache\n\n**Get Recent News**:\n```bash\ncurl 'https://[PROJECT_ID].supabase.co/rest/v1/news_cache?order=fetched_at.desc&limit=20' \\\n  -H \"Authorization: Bearer [KEY]\"\n```\n\n**Search News by Tags**:\n```bash\ncurl 'https://[PROJECT_ID].supabase.co/rest/v1/news_cache?relevance_tags=cs.[\"ai\",\"tech\"]' \\\n  -H \"Authorization: Bearer [KEY]\"\n```\n\n### research_findings\n\n**Create Finding**:\n```bash\ncurl -X POST https://[PROJECT_ID].supabase.co/rest/v1/research_findings \\\n  -H \"Authorization: Bearer [KEY]\" \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\n    \"user_id\": \"550e8400-e29b-41d4-a716-446655440000\",\n    \"task_id\": \"550e8400-e29b-41d4-a716-446655440001\",\n    \"topic\": \"AI Safety\",\n    \"agent_type\": \"technical\",\n    \"finding\": \"Current approaches show 87% safety rating\",\n    \"confidence_score\": 0.85,\n    \"sources\": [\"arxiv.org\", \"deepmind.google\"]\n  }'\n```\n\n**List Findings for Topic**:\n```bash\ncurl 'https://[PROJECT_ID].supabase.co/rest/v1/research_findings?topic=eq.AI%20Safety' \\\n  -H \"Authorization: Bearer [KEY]\"\n```\n\n## Edge Functions API\n\n### LLM Router\n\n**Endpoint**:\n```\nPOST /functions/v1/llm-router\n```\n\n**Request**:\n```bash\ncurl -X POST https://[PROJECT_ID].supabase.co/functions/v1/llm-router \\\n  -H \"Authorization: Bearer [KEY]\" \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\n    \"prompt\": \"What is AI?\",\n    \"type\": \"completion\",\n    \"model\": \"auto\"\n  }'\n```\n\n**Response**:\n```json\n{\n  \"success\": true,\n  \"response\": \"AI is artificial intelligence...\",\n  \"model\": \"claude-3-5-sonnet\",\n  \"tokens\": 150,\n  \"latency_ms\": 1200\n}\n```\n\n### Real-Time News\n\n**Endpoint**:\n```\nPOST /functions/v1/real-time-news\n```\n\n**Request**:\n```bash\ncurl -X POST https://[PROJECT_ID].supabase.co/functions/v1/real-time-news \\\n  -H \"Authorization: Bearer [KEY]\" \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\n    \"query\": \"AI breakthroughs\",\n    \"limit\": 20\n  }'\n```\n\n**Response**:\n```json\n{\n  \"success\": true,\n  \"articles\": [\n    {\n      \"title\": \"New AI Model Breaks Records\",\n      \"source\": \"TechCrunch\",\n      \"url\": \"https://...\",\n      \"published_at\": \"2026-01-09T10:30:00Z\",\n      \"fetch_method\": \"browser-use\"\n    }\n  ],\n  \"total\": 15,\n  \"fetch_duration_ms\": 18000\n}\n```\n\n### Agent Loop\n\n**Endpoint**:\n```\nPOST /functions/v1/agent-loop\n```\n\n**Request**:\n```bash\ncurl -X POST https://[PROJECT_ID].supabase.co/functions/v1/agent-loop \\\n  -H \"Authorization: Bearer [KEY]\" \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\n    \"goal\": \"Create business plan\",\n    \"max_iterations\": 5,\n    \"tools\": [\"codeact\", \"browser-use\", \"crawl4ai\"]\n  }'\n```\n\n**Response**:\n```json\n{\n  \"success\": true,\n  \"task_id\": \"550e8400-e29b-41d4-a716-446655440000\",\n  \"status\": \"completed\",\n  \"iterations\": 3,\n  \"result\": {\"plan\": \"...\"}\n}\n```\n\n### Memory & RAG\n\n**Endpoint**:\n```\nPOST /functions/v1/memory-rag\n```\n\n**Request**:\n```bash\ncurl -X POST https://[PROJECT_ID].supabase.co/functions/v1/memory-rag \\\n  -H \"Authorization: Bearer [KEY]\" \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\n    \"action\": \"search\",\n    \"query\": \"market trends\",\n    \"limit\": 10\n  }'\n```\n\n**Response**:\n```json\n{\n  \"success\": true,\n  \"memories\": [\n    {\n      \"id\": \"550e8400-e29b-41d4-a716-446655440000\",\n      \"content\": \"Enterprise AI adoption growing 45% YoY\",\n      \"similarity\": 0.92\n    }\n  ]\n}\n```\n\n### Wide Research\n\n**Endpoint**:\n```\nPOST /functions/v1/wide-research\n```\n\n**Request**:\n```bash\ncurl -X POST https://[PROJECT_ID].supabase.co/functions/v1/wide-research \\\n  -H \"Authorization: Bearer [KEY]\" \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\n    \"topic\": \"Should we adopt AI?\",\n    \"depth\": \"comprehensive\"\n  }'\n```\n\n**Response**:\n```json\n{\n  \"success\": true,\n  \"consensus\": {\n    \"score\": 0.87,\n    \"recommendation\": \"yes\"\n  },\n  \"findings\": {\n    \"technical\": \"Feasible, 9/10\",\n    \"market\": \"Strong demand, 8/10\",\n    \"risk\": \"Manageable risks, 7/10\"\n  },\n  \"duration_ms\": 185000\n}\n```\n\n## Query Parameters\n\n**Filtering**:\n```\n?column=eq.value\n?column=neq.value\n?column=gt.value\n?column=gte.value\n?column=lt.value\n?column=lte.value\n?column=like.%pattern%\n?column=ilike.%pattern%\n?column=in.(value1,value2)\n```\n\n**Ordering**:\n```\n?order=column.asc\n?order=column.desc\n?order=created_at.desc,name.asc\n```\n\n**Pagination**:\n```\n?limit=20\n?offset=40\n?page=3&limit=10\n```\n\n**Select Specific Columns**:\n```\n?select=id,name,created_at\n```\n\n## Error Responses\n\n**400 Bad Request**:\n```json\n{\n  \"error\": \"Invalid request\",\n  \"message\": \"Missing required field: goal\"\n}\n```\n\n**401 Unauthorized**:\n```json\n{\n  \"error\": \"Unauthorized\",\n  \"message\": \"Invalid or expired token\"\n}\n```\n\n**404 Not Found**:\n```json\n{\n  \"error\": \"Not found\",\n  \"message\": \"Task not found\"\n}\n```\n\n**429 Too Many Requests**:\n```json\n{\n  \"error\": \"Rate limited\",\n  \"message\": \"Too many requests. Try again in 60 seconds.\"\n}\n```\n\n**500 Internal Server Error**:\n```json\n{\n  \"error\": \"Internal server error\",\n  \"message\": \"An unexpected error occurred\"\n}\n```\n\n## Rate Limiting\n\n- **Free Tier**: 1,000 requests/hour\n- **Pro Tier**: 10,000 requests/hour\n- **Enterprise**: Custom limits\n\nHeaders returned:\n```\nRateLimit-Limit: 1000\nRateLimit-Remaining: 950\nRateLimit-Reset: 1672531200\n```\n\n## SDK Examples\n\n**JavaScript/TypeScript**:\n```typescript\nimport { createClient } from '@supabase/supabase-js';\n\nconst client = createClient(SUPABASE_URL, SUPABASE_ANON_KEY);\n\n// Get tasks\nconst { data, error } = await client\n  .from('agent_tasks')\n  .select('*')\n  .eq('status', 'completed');\n```\n\n**Python**:\n```python\nfrom supabase import create_client\n\nclient = create_client(SUPABASE_URL, SUPABASE_ANON_KEY)\n\n# Get tasks\nresponse = client.table('agent_tasks').select('*').execute()\n```\n\n**cURL**:\n```bash\ncurl -X GET https://[PROJECT_ID].supabase.co/rest/v1/agent_tasks \\\n  -H \"Authorization: Bearer [KEY]\" \\\n  -H \"Content-Type: application/json\"\n```\n\n---\n\n**Last Updated**: January 9, 2026\n**Version**: 1.0.0\n**Status**: Production Ready\n